<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tickets Restaurante</title>
<style>
  body {
    font-family: monospace;
    margin: 0;
    padding: 20px;
    background: #f8f8f8;
  }
  .row {
    display: flex;
    flex-wrap: nowrap;
    justify-content: center;
    margin-bottom: 20px;
    gap: 15px;
  }
  .ticket-container {
    position: relative;
  }
  .ticket {
    width: 80mm;
    background: #fff;
    padding: 10px;
    border: 1px dashed #000;
    text-align: center;
  }
  .ticket h2 {
    margin: 0;
    font-size: 16px;
  }
  .logo-text {
    font-size: 18px;
    font-weight: bold;
    margin: 10px 0;
  }
  .item {
    display: flex;
    justify-content: space-between;
    margin: 10px 0;
    font-size: 14px;
  }
  .total {
    text-align: right;
    font-weight: bold;
    margin-top: 5px;
    font-size: 14px;
  }
  .time {
    font-size: 12px;
    margin-top: 5px;
  }
  .btn-print {
    margin-top: 10px;
    padding: 5px;
    width: 100%;
    background: black;
    color: white;
    border: none;
    cursor: pointer;
    font-size: 14px;
  }

  /* Estilos específicos para impresión */
  @media print {
    @page {
      size: 58mm auto; /* Ancho fijo 58mm, alto automático */
      margin: 2mm; /* Margen mínimo */
    }
    
    body {
      margin: 0 !important;
      padding: 0 !important;
      background: white !important;
    }
    
    /* Ocultar todo excepto el ticket que se está imprimiendo */
    body * {
      visibility: hidden !important;
    }
    
    .printable, .printable * {
      visibility: visible !important;
    }
    
    /* Ocultar botones en impresión */
    .btn-print {
      display: none !important;
    }
    
    /* Posicionar el ticket para impresión */
    .printable {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 54mm !important; /* Ancho efectivo considerando márgenes */
      padding: 2mm !important;
      border: none !important;
      font-size: 12px !important;
      page-break-after: avoid !important;
    }
    
    .printable h2 {
      font-size: 14px !important;
      margin: 2mm 0 !important;
    }
    
    .printable .logo-text {
      font-size: 16px !important;
      margin: 3mm 0 !important;
    }
    
    .printable .item {
      font-size: 12px !important;
      margin: 2mm 0 !important;
    }
    
    .printable .total {
      font-size: 12px !important;
      margin-top: 2mm !important;
    }
    
    .printable .time {
      font-size: 10px !important;
      margin-top: 2mm !important;
    }
    
    /* Ajustes para campos personalizables */
    .printable input {
      border: none !important;
      background: transparent !important;
      font-family: monospace !important;
      font-size: 12px !important;
      text-align: center !important;
    }
  }
</style>
</head>
<body>

<!-- Fila 1: Menús -->
<div class="row">
  <div class="ticket-container">
    <div class="ticket" id="ticket1">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Menú x1</span><span>S/ 13.00</span></div>
      <div class="total">TOTAL: S/ 13.00</div>
      <div class="time" id="time1"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket1')">Imprimir</button>
  </div>

  <div class="ticket-container">
    <div class="ticket" id="ticket2">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Menú x2</span><span>S/ 26.00</span></div>
      <div class="total">TOTAL: S/ 26.00</div>
      <div class="time" id="time2"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket2')">Imprimir</button>
  </div>

  <div class="ticket-container">
    <div class="ticket" id="ticket3">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Menú x3</span><span>S/ 39.00</span></div>
      <div class="total">TOTAL: S/ 39.00</div>
      <div class="time" id="time3"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket3')">Imprimir</button>
  </div>

  <div class="ticket-container">
    <div class="ticket" id="ticket4">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Menú x4</span><span>S/ 52.00</span></div>
      <div class="total">TOTAL: S/ 52.00</div>
      <div class="time" id="time4"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket4')">Imprimir</button>
  </div>
</div>

<!-- Fila 2: Entrada, Segundo, Calentado, Custom -->
<div class="row">
  <div class="ticket-container">
    <div class="ticket" id="ticket5">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Entrada</span><span>S/ 5.00</span></div>
      <div class="total">TOTAL: S/ 5.00</div>
      <div class="time" id="time5"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket5')">Imprimir</button>
  </div>

  <div class="ticket-container">
    <div class="ticket" id="ticket6">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Segundo</span><span>S/ 12.00</span></div>
      <div class="total">TOTAL: S/ 12.00</div>
      <div class="time" id="time6"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket6')">Imprimir</button>
  </div>

  <div class="ticket-container">
    <div class="ticket" id="ticket7">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Calentado</span><span>S/ 8.00</span></div>
      <div class="total">TOTAL: S/ 8.00</div>
      <div class="time" id="time7"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket7')">Imprimir</button>
  </div>

  <div class="ticket-container">
    <div class="ticket" id="ticket8">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item">
        <input type="text" id="customText" placeholder="Escribe algo" style="width:70%; border:1px solid #ccc;">
      </div>
      <div class="total">TOTAL: S/ 
        <input type="number" id="customPrice" value="0" style="width:50px; border:1px solid #ccc;">
      </div>
      <div class="time" id="time8"></div>
    </div>
    <button class="btn-print" onclick="printTicketCustom('ticket8')">Imprimir</button>
  </div>
</div>

<script>
  function updateTime() {
    const now = new Date().toLocaleString('es-PE', { 
      day: '2-digit',
      month: '2-digit', 
      year: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
    for (let i = 1; i <= 8; i++) {
      document.getElementById('time' + i).innerText = now;
    }
  }
  
  setInterval(updateTime, 1000);
  updateTime();

  function printTicket(id) {
    const ticket = document.getElementById(id);
    
    // Agregar clase para hacer visible en impresión
    ticket.classList.add('printable');
    
    // Imprimir
    window.print();
    
    // Remover clase después de imprimir
    setTimeout(() => {
      ticket.classList.remove('printable');
    }, 100);
  }

  function printTicketCustom(id) {
    const ticket = document.getElementById(id);
    const customText = document.getElementById('customText').value;
    const customPrice = document.getElementById('customPrice').value;
    
    // Crear una copia del ticket con los valores actuales
    const ticketClone = ticket.cloneNode(true);
    
    // Reemplazar inputs con texto fijo para impresión
    const textInput = ticketClone.querySelector('#customText');
    const priceInput = ticketClone.querySelector('#customPrice');
    
    if (textInput) {
      textInput.outerHTML = `<span>${customText || 'Producto personalizado'}</span>`;
    }
    if (priceInput) {
      priceInput.outerHTML = `${customPrice || '0'}.00`;
    }
    
    // Agregar el clon temporal al body
    ticketClone.id = 'temp-ticket';
    ticketClone.classList.add('printable');
    ticketClone.style.display = 'none';
    document.body.appendChild(ticketClone);
    
    // Imprimir
    window.print();
    
    // Limpiar después de imprimir
    setTimeout(() => {
      document.body.removeChild(ticketClone);
    }, 100);
  }
</script>

</body>
</html>
