<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tickets Restaurante</title>
<style>
  body {
    font-family: monospace;
    margin: 0;
    padding: 20px;
    background: #f8f8f8;
  }
  .row {
    display: flex;
    flex-wrap: nowrap;
    justify-content: center;
    margin-bottom: 20px;
    gap: 15px;
  }
  .ticket-container {
    position: relative;
  }
  .ticket {
    width: 80mm;
    background: #fff;
    padding: 10px;
    border: 1px dashed #000;
    text-align: center;
  }
  .ticket h2 {
    margin: 0;
    font-size: 16px;
  }
  .logo-text {
    font-size: 18px;
    font-weight: bold;
    margin: 10px 0;
  }
  .item {
    display: flex;
    justify-content: space-between;
    margin: 10px 0;
    font-size: 14px;
  }
  .total {
    text-align: right;
    font-weight: bold;
    margin-top: 5px;
    font-size: 14px;
  }
  .time {
    font-size: 12px;
    margin-top: 5px;
  }
  .btn-print {
    margin-top: 10px;
    padding: 5px;
    width: 100%;
    background: black;
    color: white;
    border: none;
    cursor: pointer;
    font-size: 14px;
  }

  /* Estilos específicos para impresión POS */
  @media print {
    @page {
      size: 58mm 200mm; /* Tamaño fijo que se ajustará */
      margin: 0; /* Sin márgenes */
    }
    
    html, body {
      margin: 0 !important;
      padding: 0 !important;
      background: white !important;
      height: auto !important;
      overflow: hidden !important;
    }
    
    /* Ocultar todo excepto el ticket que se está imprimiendo */
    body * {
      visibility: hidden !important;
    }
    
    .printable, .printable * {
      visibility: visible !important;
    }
    
    /* Ocultar botones en impresión */
    .btn-print {
      display: none !important;
    }
    
    /* Posicionar el ticket para impresión POS */
    .printable {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      width: 58mm !important;
      max-width: 58mm !important;
      min-height: auto !important;
      height: auto !important;
      padding: 3mm !important;
      margin: 0 !important;
      border: none !important;
      font-size: 11px !important;
      line-height: 1.2 !important;
      box-sizing: border-box !important;
      overflow: hidden !important;
    }
    
    .printable h2 {
      font-size: 12px !important;
      margin: 0 0 2mm 0 !important;
      line-height: 1.1 !important;
    }
    
    .printable .logo-text {
      font-size: 14px !important;
      margin: 2mm 0 !important;
      line-height: 1.1 !important;
    }
    
    .printable .item {
      font-size: 10px !important;
      margin: 1mm 0 !important;
      display: flex !important;
      justify-content: space-between !important;
      line-height: 1.2 !important;
    }
    
    .printable .total {
      font-size: 11px !important;
      margin: 2mm 0 1mm 0 !important;
      font-weight: bold !important;
      text-align: right !important;
      line-height: 1.2 !important;
    }
    
    .printable .time {
      font-size: 9px !important;
      margin: 1mm 0 0 0 !important;
      line-height: 1.1 !important;
    }
    
    /* Ajustes para campos personalizables */
    .printable input {
      border: none !important;
      background: transparent !important;
      font-family: monospace !important;
      font-size: 10px !important;
      text-align: center !important;
      padding: 0 !important;
      margin: 0 !important;
    }
  }
</style>
</head>
<body>

<!-- Fila 1: Menús -->
<div class="row">
  <div class="ticket-container">
    <div class="ticket" id="ticket1">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Menú x1</span><span>S/ 13.00</span></div>
      <div class="total">TOTAL: S/ 13.00</div>
      <div class="time" id="time1"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket1')">Imprimir Normal</button>
    <button class="btn-print" onclick="printTicketPOS('ticket1')" style="background: #333; margin-top: 2px;">Imprimir POS</button>
  </div>

  <div class="ticket-container">
    <div class="ticket" id="ticket2">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Menú x2</span><span>S/ 26.00</span></div>
      <div class="total">TOTAL: S/ 26.00</div>
      <div class="time" id="time2"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket2')">Imprimir Normal</button>
    <button class="btn-print" onclick="printTicketPOS('ticket2')" style="background: #333; margin-top: 2px;">Imprimir POS</button>
  </div>

  <div class="ticket-container">
    <div class="ticket" id="ticket3">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Menú x3</span><span>S/ 39.00</span></div>
      <div class="total">TOTAL: S/ 39.00</div>
      <div class="time" id="time3"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket3')">Imprimir Normal</button>
    <button class="btn-print" onclick="printTicketPOS('ticket3')" style="background: #333; margin-top: 2px;">Imprimir POS</button>
  </div>

  <div class="ticket-container">
    <div class="ticket" id="ticket4">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Menú x4</span><span>S/ 52.00</span></div>
      <div class="total">TOTAL: S/ 52.00</div>
      <div class="time" id="time4"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket4')">Imprimir Normal</button>
    <button class="btn-print" onclick="printTicketPOS('ticket4')" style="background: #333; margin-top: 2px;">Imprimir POS</button>
  </div>
</div>

<!-- Fila 2: Entrada, Segundo, Calentado, Custom -->
<div class="row">
  <div class="ticket-container">
    <div class="ticket" id="ticket5">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Entrada</span><span>S/ 5.00</span></div>
      <div class="total">TOTAL: S/ 5.00</div>
      <div class="time" id="time5"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket5')">Imprimir Normal</button>
    <button class="btn-print" onclick="printTicketPOS('ticket5')" style="background: #333; margin-top: 2px;">Imprimir POS</button>
  </div>

  <div class="ticket-container">
    <div class="ticket" id="ticket6">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Segundo</span><span>S/ 12.00</span></div>
      <div class="total">TOTAL: S/ 12.00</div>
      <div class="time" id="time6"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket6')">Imprimir Normal</button>
    <button class="btn-print" onclick="printTicketPOS('ticket6')" style="background: #333; margin-top: 2px;">Imprimir POS</button>
  </div>

  <div class="ticket-container">
    <div class="ticket" id="ticket7">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item"><span>Calentado</span><span>S/ 8.00</span></div>
      <div class="total">TOTAL: S/ 8.00</div>
      <div class="time" id="time7"></div>
    </div>
    <button class="btn-print" onclick="printTicket('ticket7')">Imprimir Normal</button>
    <button class="btn-print" onclick="printTicketPOS('ticket7')" style="background: #333; margin-top: 2px;">Imprimir POS</button>
  </div>

  <div class="ticket-container">
    <div class="ticket" id="ticket8">
      <h2>RESTAURANTE</h2>
      <div class="logo-text">LA NUEVA ZOILITA</div>
      <div class="item">
        <input type="text" id="customText" placeholder="Escribe algo" style="width:70%; border:1px solid #ccc;">
      </div>
      <div class="total">TOTAL: S/ 
        <input type="number" id="customPrice" value="0" style="width:50px; border:1px solid #ccc;">
      </div>
      <div class="time" id="time8"></div>
    </div>
    <button class="btn-print" onclick="printTicketCustom('ticket8')">Imprimir Normal</button>
    <button class="btn-print" onclick="printTicketCustomPOS('ticket8')" style="background: #333; margin-top: 2px;">Imprimir POS</button>
  </div>
</div>

<script>
  function updateTime() {
    const now = new Date().toLocaleString('es-PE', { 
      day: '2-digit',
      month: '2-digit', 
      year: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
    for (let i = 1; i <= 8; i++) {
      document.getElementById('time' + i).innerText = now;
    }
  }
  
  setInterval(updateTime, 1000);
  updateTime();

  function printTicket(id) {
    // Método 1: Impresión directa (actual)
    const ticket = document.getElementById(id);
    ticket.classList.add('printable');
    window.print();
    setTimeout(() => {
      ticket.classList.remove('printable');
    }, 100);
  }

  function printTicketPOS(id) {
    // Método 2: Ventana popup específica para POS
    const ticket = document.getElementById(id);
    const content = ticket.innerHTML;
    
    const printWindow = window.open('', '_blank', 'width=220,height=400');
    printWindow.document.write(`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <style>
          @page { 
            size: 58mm auto; 
            margin: 0; 
          }
          body { 
            font-family: monospace; 
            margin: 0; 
            padding: 3mm; 
            width: 52mm; 
            font-size: 10px; 
            line-height: 1.2;
            text-align: center;
          }
          h2 { 
            font-size: 11px; 
            margin: 0 0 2mm 0; 
          }
          .logo-text { 
            font-size: 13px; 
            font-weight: bold; 
            margin: 2mm 0; 
          }
          .item { 
            display: flex; 
            justify-content: space-between; 
            margin: 1mm 0; 
            font-size: 9px; 
          }
          .total { 
            text-align: right; 
            font-weight: bold; 
            margin: 2mm 0 1mm 0; 
            font-size: 10px; 
          }
          .time { 
            font-size: 8px; 
            margin: 1mm 0 0 0; 
          }
        </style>
      </head>
      <body>${content}</body>
      </html>
    `);
    
    printWindow.document.close();
    printWindow.focus();
    
    setTimeout(() => {
      printWindow.print();
      printWindow.close();
    }, 500);
  }

  function printTicketCustom(id) {
    const ticket = document.getElementById(id);
    const customText = document.getElementById('customText').value;
    const customPrice = document.getElementById('customPrice').value;
    
    // Crear una copia del ticket con los valores actuales
    const ticketClone = ticket.cloneNode(true);
    
    // Reemplazar inputs con texto fijo para impresión
    const textInput = ticketClone.querySelector('#customText');
    const priceInput = ticketClone.querySelector('#customPrice');
    
    if (textInput) {
      textInput.outerHTML = `<span>${customText || 'Producto personalizado'}</span>`;
    }
    if (priceInput) {
      priceInput.outerHTML = `${customPrice || '0'}.00`;
    }
    
    // Agregar el clon temporal al body
    ticketClone.id = 'temp-ticket';
    ticketClone.classList.add('printable');
    ticketClone.style.display = 'none';
    document.body.appendChild(ticketClone);
    
    // Imprimir
    window.print();
    
    // Limpiar después de imprimir
    setTimeout(() => {
      document.body.removeChild(ticketClone);
    }, 100);
  }

  function printTicketCustomPOS(id) {
    // Método POS para ticket personalizable
    const customText = document.getElementById('customText').value;
    const customPrice = document.getElementById('customPrice').value;
    const now = new Date().toLocaleString('es-PE', { 
      day: '2-digit',
      month: '2-digit', 
      year: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
    
    const printWindow = window.open('', '_blank', 'width=220,height=400');
    printWindow.document.write(`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <style>
          @page { 
            size: 58mm auto; 
            margin: 0; 
          }
          body { 
            font-family: monospace; 
            margin: 0; 
            padding: 3mm; 
            width: 52mm; 
            font-size: 10px; 
            line-height: 1.2;
            text-align: center;
          }
          h2 { 
            font-size: 11px; 
            margin: 0 0 2mm 0; 
          }
          .logo-text { 
            font-size: 13px; 
            font-weight: bold; 
            margin: 2mm 0; 
          }
          .item { 
            display: flex; 
            justify-content: space-between; 
            margin: 1mm 0; 
            font-size: 9px; 
          }
          .total { 
            text-align: right; 
            font-weight: bold; 
            margin: 2mm 0 1mm 0; 
            font-size: 10px; 
          }
          .time { 
            font-size: 8px; 
            margin: 1mm 0 0 0; 
          }
        </style>
      </head>
      <body>
        <h2>RESTAURANTE</h2>
        <div class="logo-text">LA NUEVA ZOILITA</div>
        <div class="item"><span>${customText || 'Producto personalizado'}</span><span>S/ ${customPrice || '0'}.00</span></div>
        <div class="total">TOTAL: S/ ${customPrice || '0'}.00</div>
        <div class="time">${now}</div>
      </body>
      </html>
    `);
    
    printWindow.document.close();
    printWindow.focus();
    
    setTimeout(() => {
      printWindow.print();
      printWindow.close();
    }, 500);
  }
</script>

</body>
</html>
